# План рефакторинга UX фильтров каталога

Этот документ описывает поэтапный план по улучшению пользовательского опыта (UX) при работе с фильтрами в каталоге вин. За основу взят референс из приложения Ozon.

## Этап 1: MVP (Minimum Viable Product) - Реализация на примере фильтра "Винодельня"

На этом этапе мы создаем новый, удобный и производительный шаблон для всех сложных фильтров с множественным выбором.

### 1.1. Единый полноэкранный экран выбора
- Вместо `BottomSheet` при нажатии на фильтр будет открываться отдельный `Scaffold` (`WinerySelectionScreen`).
- **AppBar:** Должен содержать стрелку "назад" и кнопку "Сбросить" для очистки текущего фильтра.
- **Поиск:** Сверху экрана будет расположено поле для текстового поиска по списку.
- **Список:** Данные для списка загружаются асинхронно. Элементы представляют собой `CheckboxListTile` для множественного выбора.

### 1.2. Реактивное применение фильтра
- **Без кнопки "Применить":** Каждое нажатие на `Checkbox` немедленно обновляет глобальное состояние фильтров (`catalogFiltersProvider`).
- При возврате на экран каталога список товаров автоматически обновляется в соответствии с измененными фильтрами.

### 1.3. Улучшенная кнопка фильтра
- **Индикация активности:** Кнопка фильтра на экране каталога меняет цвет, если в нем выбрано хотя бы одно значение.
- **Счетчик:** Кнопка отображает количество выбранных элементов (например, "Винодельня: 3").
- **Быстрая очистка:** Рядом со счетчиком появляется иконка "крестик", позволяющая сбросить данный конкретный фильтр, не заходя на экран выбора.

## Этап 2: Будущие улучшения (Backlog)

Эти задачи будут реализованы в следующих итерациях для дальнейшего улучшения UX.

- **[ ] Двухуровневый выбор:** Реализовать `BottomSheet` с "популярными" вариантами и кнопкой "Показать все", которая ведет на полноэкранный `Scaffold`.
- **[ ] Группировка по алфавиту:** На экране выбора сгруппировать длинные списки (винодельни, сорта) по первой букве.
- **[ ] Блок "Популярные":** Реализовать логику для отображения "популярных" или "продвигаемых" виноделен/сортов вверху списка. Потребует доработки бэкенда (например, поле `is_promoted` в таблице).
- **[ ] Перемещение активных фильтров:** Реализовать логику, при которой кнопки активных фильтров перемещаются в начало горизонтального списка фильтров для быстрого доступа.
- **[ ] Отображение выбранных "чипсов":** На экране выбора показывать вверху "чипсы" (pills) с уже выбранными элементами, которые можно быстро удалить.